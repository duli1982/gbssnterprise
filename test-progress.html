<!DOCTYPE html>
<html>
<head>
    <title>Progress Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">
    <h1 class="text-2xl font-bold mb-4">Progress Tracking Test</h1>
    
    <div class="space-y-4">
        <div>
            <h2 class="text-lg font-semibold">Test localStorage:</h2>
            <button onclick="testStorage()" class="bg-blue-600 text-white px-4 py-2 rounded">Test Storage</button>
            <div id="storage-result" class="mt-2"></div>
        </div>
        
        <div>
            <h2 class="text-lg font-semibold">Test Progress Functions:</h2>
            <button onclick="testProgress()" class="bg-green-600 text-white px-4 py-2 rounded">Test Progress</button>
            <div id="progress-result" class="mt-2"></div>
        </div>
    </div>

    <script>
        // Copy the ProgressTracker class from app.js to test
        class ProgressTracker {
            constructor() {
                this.storageKey = 'rpo-training-progress';
                this.progress = this.loadProgress();
            }

            loadProgress() {
                const saved = localStorage.getItem(this.storageKey);
                return saved ? JSON.parse(saved) : {};
            }

            saveProgress() {
                localStorage.setItem(this.storageKey, JSON.stringify(this.progress));
            }

            markSessionComplete(sessionId) {
                this.progress[sessionId] = {
                    completed: true,
                    completedAt: new Date().toISOString()
                };
                this.saveProgress();
            }

            isSessionComplete(sessionId) {
                return this.progress[sessionId]?.completed || false;
            }

            getOverallProgress() {
                const allSessions = ['session-1-1', 'session-1-2', 'session-1-3', 'session-2-1'];
                const completed = allSessions.filter(id => this.isSessionComplete(id)).length;
                return { completed, total: allSessions.length, percentage: Math.round((completed / allSessions.length) * 100) };
            }
        }

        const tracker = new ProgressTracker();

        function testStorage() {
            tracker.markSessionComplete('session-1-1');
            const result = tracker.isSessionComplete('session-1-1');
            document.getElementById('storage-result').innerHTML = `Session 1-1 marked complete: ${result}`;
        }

        function testProgress() {
            const progress = tracker.getOverallProgress();
            document.getElementById('progress-result').innerHTML = `Progress: ${progress.completed}/${progress.total} (${progress.percentage}%)`;
        }
    </script>
</body>
</html>